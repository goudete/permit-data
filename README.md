# City Permits Data Processing

This project is designed to process and analyze permit data from New York (NY) and San Francisco (SF). It utilizes Python scripts to filter and output specific data based on the requirements. The project is structured to use Poetry for dependency management, ensuring a consistent and reproducible environment for running the scripts.

Download NY Permit data:
https://data.cityofnewyork.us/Housing-Development/DOB-Permit-Issuance/ipu4-2q9a/about_data

Download SF Permit data:
https://data.sfgov.org/Housing-and-Buildings/SF-Planning-Permitting-Data/kncr-c6jw/about_data

## Directory Structure
- `city-data/`: Contains the permit data files for NY and SF. These CSV files are the raw data that the scripts will process. Make sure to download them from the above links
- `output/`: This directory will store the output files generated by the scripts. Each script's output, such as filtered permit data, will be saved here in CSV format.

## Scripts

### NY Permits (`src/permits/ny-permits.py`)

- `get_2024_permits()`: Filters the NY permit data to include only the permits issued in the year 2024. The filtered data is then outputted to the `output/` directory.
- `search_for_job_number(job_number)`: Searches the NY permit data for a specific job number. If found, the corresponding data is outputted to the `output/` directory.

### SF Permits (`src/permits/sf-permits.py`)

- `get_via_project_id(project_id)`: Filters the SF permit data based on a given project ID. The filtered data is then saved to the `output/` directory.
- `get_ev_fleet_projects()`: Filters the SF permit data to find projects related to Electric Vehicles (EV). The filtered data is outputted to the `output/` directory.

### Scraper (`src/scraper/scrape.py`)
Scrapes emails based on company name

## Dependency Management

This project uses Poetry for managing dependencies. To ensure that you have all the necessary packages, please follow these steps:

1. Install Poetry if you haven't already. You can find the installation instructions on the [official Poetry website](https://python-poetry.org/docs/).
2. Navigate to the project directory and run `poetry install` to install the dependencies specified in the `pyproject.toml` file.

## Running the Scripts

To run any of the scripts, ensure you are in the project's root directory and have activated the Poetry environment. You can activate the environment by running `poetry shell`. Then, execute the desired script using Python. For example:

```shell
poetry run python ny-permits.py
```